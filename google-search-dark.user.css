/* ==UserStyle==
@name           Google Search Material Dark
@namespace      github.com/openstyles/stylus
@version        0.0.16
@description    Custom dark theme applied to Google Search Results following Material Design practices
@author         Weikardzaena
@license        Apache 2.0
@updateURL      https://raw.githubusercontent.com/Weikardzaena/WebsiteDarkThemes/material-elevation/google-search-dark.user.css
@preprocessor   stylus
==/UserStyle== */
@-moz-document regexp("^https:\\/\\/www\\.google\\.com(?!\\/maps)(?!\\/flights)((?!tbm=).)*$")
    bg-00 = #121212
    bg-01 = #1d1d1d
    bg-02 = #222222
    bg-03 = #242424
    bg-04 = #272727
    bg-06 = #2c2c2c
    bg-08 = #2e2e2e
    bg-12 = #323232
    bg-16 = #353535
    bg-24 = #373737
    focused = #ffffff3d
    fg-p = #ffffff9a
    fg-emph = #ffffffdf
    fg-disabled = #ffffff61
    fg-on-p = #000000
    fg-on-s = #000000
    fg-on-e = #ffffff
    ac-p = #8fcdfd
    ac-p-hov = #e3f3fe
    ac-p-alt = #a3d597
    ac-s = #d392c6
    error = #ba453f

    /* How high off the 0dp level the light source is */
    light-elev = unit(60, px)
    /* dp offset of the light source relative to the bottom-aligned edge of the visual element */
    light-offset = unit(5, px)
    /* How wide the light source is */
    light-width = unit(80, px)

    lighting(dp)
        if dp <= 0
            background bg-00 !important
        else
            light-value = 7 * math(87 * dp, "log")
            background rgb(light-value, light-value, light-value) !important

    pAccentLighting(dp)
        if dp <= 0
            background ac-p !important
        else
            light-val = 7 * math(87 * dp, "log")
            tint-val = ceil(percentage(min(1, (light-val / 256))))
            background tint(ac-p, tint-val) !important

    pAltAccentLighting(dp)
        if dp <= 0
            background ac-p !important
        else
            light-val = 7 * math(87 * dp, "log")
            tint-val = ceil(percentage(min(1, (light-val / 256))))
            background tint(ac-p, tint-val) !important

    sAccentLighting(dp)
        if dp <= 0
            background ac-s !important
        else
            light-val = 7 * math(87 * dp, "log")
            tint-val = ceil(percentage(min(1, (light-val / 256))))
            background tint(ac-s, tint-val) !important

    elevation(dp)
        dp = unit(dp, px)
        if dp <= 0 or dp >= light-elev
            box-shadow none !important
        else
            /* This math comes from leveraging similar triangles with a flat light source and a flat visual element */
            bottom-offset = (light-offset / ((light-elev / dp) - 1))
            /* numerator and denom come from similar triangles */
            numerator = (light-width ** 2) * (dp ** 2 + bottom-offset ** 2)
            denom = light-width ** 2 + (light-elev - dp) ** 2
            result = (numerator / denom)
            /* a^2 + b^2 = c^2, so we take the sqrt here. */
            radius = math(result, "sqrt")
            offset-tot = bottom-offset + (radius / 2)
            box-shadow 0 offset-tot radius 0 black, 0 0 max((radius / 2), unit(2, px)) 0 black !important
    
    scrimmedBg()
        background bg-24 !important
        opacity 0.75 !important
    
    /* =============== */
    /* SECTION: Global */
    /* =============== */
    body
        lighting(0)
        color fg-p

    textarea
        color fg-p

    /* Links */
    a:link,
    .w,
    #prs a:visited,
    #prs a:active,
    .q:active,
    .q:visited,
    .kl:active,
    .tbotu
        color ac-p
    
    .mblink:visited,
    a:visited
        color ac-s
    
    .a,
    cite,
    cite a:link,
    cite a:visited,
    .cite,
    .cite:link,
    #nygTcd > i,
    .bc a:link
        color ac-p-alt
    

    input
        background bg-00
        color fg-p
    

    /* Expando arrow */
    .GHDvEf,
    .GHDvEf:hover,
    .GHDvEf.selected,
    .GHDvEf.selected:hover
        background transparent
    
    .action-menu .mn-dwn-arw
        border-color transparent
        border-top-color ac-p-alt
    
    .action-menu:hover .mn-dwn-arw
        border-color transparent
        border-top-color ac-p
    

    /* ================================ */
    /* SECTION: www.google.com homepage */
    /* ================================ */
    /* Links at top of page */
    #gb#gb a.gb_d,
    #gb#gb a.gb_e,
    #gb#gb span.gb_e
        color fg-p
        &:hover
            color fg-emph
    
    #hptl a
        color fg-p
        
    .RNNXgb
        lighting(01)
        border none
        elevation(01)
        &:hover
            lighting(03)
            elevation(03)
    
    /* Search Bar */
    .sbfc .RNNXgb
        lighting(03)
        elevation(03)
    
    .rINcab
        color ac-p
    
    .aajZCb
        lighting(03)
        elevation(03)
    
    .emcav .RNNXgb
        elevation(03)
    
    .gLFyf
        color fg-p
    
    .RNNXgb:hover .gLFyf,
    .gLFyf:focus
        color fg-emph
    
    .sbl1
        color fg-p
    
    .sbhl
        background focused
    
    .sbhl .sbl1
        color fg-emph
    
    .xtSCL
        border-top-color black

    /* Search buttons below search bar */
    .jhp input[type="submit"],
    .sbdd_a input,
    .gbqfba
        lighting(02)
        border: none
        elevation(2)
        color fg-p
    
    .jhp input[type="submit"]:hover,
    .sbdd_a input:hover,
    .gbqfba:hover
        lighting(08)
        color fg-emph
        border: none
        elevation(08)
        
    /* Search buttons within dropdown results */
    .aajZCb input[type="submit"]
        lighting(05)
        border: none
        elevation(02)
        color fg-p
    
    .aajZCb input[type="submit"]:hover
        lighting(12)
        elevation(08)
        color fg-emph
        border: none
    
    /* Footer */
    .ftl,
    #footer a
        color fg-disabled
    

    /* =================== */
    /* SECTION: Search bar */
    /* =================== */

    // Main search bar
    #searchform .RNNXgb
        lighting(05)
        border none
        elevation(01)
        &:hover
            lighting(08)
            elevation(04)
    
    // Expanded search bar
    #searchform .sbfc .RNNXgb
        lighting(08)
        elevation(04)
    
    #searchform .rINcab
        color ac-p
    
    // Dropdown results
    #searchform .aajZCb
        lighting(08)
        elevation(4)
    
    #searchform .emcav .RNNXgb
        elevation(08)
    
    #searchform .gLFyf
        color fg-p
    
    #searchform .RNNXgb:hover .gLFyf,
    #searchform .gLFyf:focus
        color fg-emph
    
    #searchform .sbl1
        color fg-p
    
    #searchform .sbhl
        background focused
    
    #searchform .sbhl .sbl1
        color fg-emph
    
    #searchform .xtSCL
        border-top-color black
    
    /* ============================ */
    /* SECTION: Google Apps popover */
    /* ============================ */

    // popover main section
    .gb_I,
    .gb_E
        lighting(24)
    .gb_E
        elevation(24)
    
    // Bottom "more" button
    .gb_J
        lighting(08)
        color ac-p
        &:visited
            color ac-s
            
    // Bottom "Even more from google" link
    .gb_K
        color ac-p
        &:visited
            color ac-s
    
    // App icons
    .gb_r
        color fg-p
    .gb_i:hover a
        border-color transparent
        elevation(08)
    .gb_i:not(.gb_j):hover .gb_r
        lighting(24)

    /* ======================= */
    /* SECTION: Results header */
    /* ======================= */
    /* X results in Y seconds */
    #appbar
        lighting(00)

    /* "All," "Maps," "News," etc. header */
    #hdtbSum
        lighting(04)
    
    #hdtb
        border-bottom-color black
        elevation(04)
    
    #hdtb .hdtb-mitem a
        color fg-p
    
    #hdtb-msb .hdtb-mitem.hdtb-msel
        color ac-p
        border-bottom-color ac-p
    
    .hdtbItm label:hover,
    .hdtbItm a:hover,
    #hdtb-more-mn a:hover,
    #hdtb .hdtb-mitem a:hover,
    .hdtb-mn-hd:hover,
    #hdtb-more:hover,
    #hdtb-tls:hover
        color ac-p
    
    #hdtb-msb #hdtb-more,
    #hdtb-msb #hdtb-tls
        color fg-p
    
    #hdtb-tls:hover
        background focused
        border: none
    
    #hdtb-msb .hdtb-tl-sel,
    #hdtb-msb .hdtb-tl-sel:hover
        background ac-p
        color fg-on-p
        border: none
    
    #hdtb-msb #hdtb-tls.hdtb-tl-sel
        color fg-on-p
    

    /* "More" dropdown */
    .cF4V5c
        lighting(12)
        elevation(08)
    
    .il8Sef a.f9UGee
        color fg-p
    
    .f9UGee.AchQod
        background focused
    
    .il8Sef a.f9UGee.AchQod
        color fg-emph
    
    /* Very top of the search results page, behind the Google logo */
    .sfbg.nojsv
        lighting(04)

    .minidiv .sfbg
        elevation(04)
    

    /* ===================== */
    /* SECTION: Main results */
    /* ===================== */
    /* Result stats at top of page */
    #resultStats
        color fg-disabled
    

    /* Tools dropdown buttons */
    .hdtb-mn-hd
        color fg-p
    
    // Tools dropdown arrow
    .hdtb-mn-hd:hover .mn-dwn-arw,
    #hdtb-more:hover .mn-dwn-arw
        border-top-color ac-p
    
    // Tools dropdown expanded menu
    .hdtb-mn-o,
    .hdtb-mn-c
        elevation(08)
        lighting(08)
    
    // Tools dropdown expanded menu list item
    .hdtbItm
        lighting(08)
    
    // Tools dropdown expanded menu links
    .hdtbItm.hdtbSel,
    #hdtb .hdtbItm a,
    #hdtb-more-mn a,
    #cdrlnk
        color fg-p
        &:hover
            background focused
            color fg-emph
    
    // Selected tools dropdown menu list item
    .hdtbItm.hdtbSel
        background focused
        color fg-emph
    
    // Tools dropdown expanded menu optional link at bottom
    #cdr_opt
        lighting(08)
    
    // Separator between tools dropdown options and link at bottom
    .cdr_sep
        border-color black
    

    /* "More" FABs */
    g-fab,
    .bl0seb.eSq3C g-fab,
    .k20eod.eSq3C g-fab
        sAccentLighting(06)
        color fg-on-s !important
        elevation(06)
        &:active
            elevation(12)
        &:hover
            sAccentLighting(12)
    
    // FAB border
    .CNf3nf
        border-color transparent !important
    
    // FAB opacity
    .Lu0opc
        opacity: 1 !important
    
    // FAB arrow fill
    g-fab .z1asCe
        fill: fg-on-p

    /* Main result cards */
    .kp-blk
        border: none
        lighting(01)
        elevation(01)
    

    /* Search result summary */
    .s
        color fg-p
    
    .s .st em,
    .st.s.std em
        color fg-p
    

    /* Trending story cards */
    g-inner-card
        lighting(01)
    
    .cv2VAd
        border: none
        elevation(01)
    
    .wUrVib
        color ac-p
    
    .EZRelc
        fill: ac-p
        color ac-p
    

    /* Maps cards */
    .vk_c,
    .vk_cxp
        elevation(01)
        lighting(01)
        border-color: transparent
    
    .yyjhs
        background bg-08
    
    .dbg0pd
        color fg-emph
    
    .uMdZh
        color fg-p
    
    .uMdZh:hover
        background focused
    
    .rllt__wrapped > span
        color error !important
    
    .F7IIOc
        color fg-p
    
    .F7IIOc.rlf__open:not(.rlf__applied),
    .F7IIOc:not(.rlf__applied):hover
        color fg-emph
    
    .FZaw6b
        border-top-color fg-p
        border-bottom-color fg-p
    
    .F7IIOc.rlf__open:not(.rlf__applied) .FZaw6b,
    .F7IIOc:not(.rlf__applied):hover .FZaw6b
        border-top-color fg-p
        border-bottom-color fg-p
    
    .tGgE5d
        border-color black
    

    /* After clicking a link, the surrounding "people also search for" tile */
    .exp-outline
        lighting(01)
        elevation(01)
        border: none
    
    .eJ7tvc
        color fg-p
    
    .XCKyNd
        background-color error
        padding: 8px
        margin: 2px
        opacity: 1
    

    /* Dictionary tile */
    .vk_gy
        color fg-disabled !important
    
    .vk_bk
        color fg-p !important
    
    .iXqz2e .exp-txt-c
        color fg-p
    
    .lr_dct_lbl_box
        background ac-s
        color fg-on-s
    
    .gJBeNe
        color fg-emph
    
    .ElpxJd
        background bg-12
        color fg-p
        border: none
        box-shadow: 0 1px 2px black
    
    .lr_dct_trns_sel:hover
        background focused
        border: none
        box-shadow: 0 1px 2px black
    
    .ElpxJd > option
        background bg-08
    
    .pVFdhc
        background black
    
    .dw-sb-cont
        background bg-00
    
    .dw-sb-cont .dw-sbi
        color fg-p
        border-color transparent
    
    .dw-sb-cont .dw-sb-btn
        background ac-p
        border: none
    
    #dictionary-modules .z1asCe
        fill: fg-on-p
    
    .vk_ard,
    .vk_aru
        background black
    
    .vk_arc
        border-color black
    
    .vk_ard:before
        border-top-color black
    
    .vk_ard:after
        border-top-color ac-s
    
    .vk_aru:before
        border-bottom-color black
    
    .vk_aru:after
        border-bottom-color ac-s
    

    /* Central food info tile */
    .Z0LcW
        color fg-p
    
    .N6Sb2c
        color fg-p
    
    .i29hTd .qLLird
        color fg-emph
    
    .i29hTd .kR7nSc
        color fg-emph
    
    .shDvCe
        color fg-disabled
    
    .k6J3K
        border: none
        box-shadow: 0 0 3px 1px black
    
    .Cc3NMb,
    .ZIxWWd
        background bg-08
        color fg-p
    
    .E6Cqjb
        background black
    
    .kno-ftr
        color fg-p
    

    /* Right food info tile */
    .Ss2Faf
        color fg-p
    
    .wwUB2c
        color fg-disabled
    
    .AYBNrd
        background bg-01
        border-color black
    
    .HIf9ae
        background bg-01
    
    .AYBNrd td
        border-color black
    

    /* Map card dropdowns */
    .czHJJ
        background bg-24
        border: none
        box-shadow: 0 0 5px black
    
    .w3RMhb .zFsEvf
        color fg-p
    
    .w3RMhb:hover .zFsEvf
        color fg-emph
    
    .w3RMhb:hover
        background focused
        color fg-emph
    
    .w3RMhb.expanded
        background ac-s
        color fg-on-s
    
    /* ========================= */
    /* SECTION: Right music info */
    /* ========================= */

    // "Did you like this album?"
    .JW2g8
        border-color black

    // XX % liked this album
    .OZ8wsd
        color fg-disabled
    
    // Like/Dislike thumbs 
    .h7xSye
        fill fg-disabled
        border-color fg-disabled
        &:hover,
        &:active
            fill ac-p
            border-color ac-p

    // "Liked" state
    .TfceZe[data-s="true"] svg
        color ac-p-alt
        fill ac-p-alt

    // "Disliked" state
    .O0rAic[data-s="true"] svg
        color error
        fill error

    // "Available On" links
    .Eegi6c
        color fg-p

    // "Available On" link borders
    .scrt td,
    .scrt tr:first-child td,
    .scrt tr:last-child td
        border-color black
        
    // "More music services" expando
    .dUFb4e
        color fg-p
    
    // Music info headers
    .w8qArf .fl
        color fg-p !important
    
    // Song list rows
    .rl_item_base
        elevation(01)
        lighting(02)
        border-color transparent
        &:hover,
        &:active
            elevation(08)
            lighting(09)
            z-index 100
        &:focus
            z-index 100

    // Song list title
    .rl_item_base .title
        color fg-p
        padding-left 15px

    // Song list number
    .q0OVVc
        color fg-p
        padding-left 15px
    
    // Song duration
    .NmQOSc
        color fg-p
        padding-right 15px
    
    // "View More" under songs list
    .P7Vl4c .RCBpod
        color fg-disabled
    
    // "Posting Publicly"
    .BP43u,
    .xgyIXd
        color fg-disabled
    
    // "Be the first to review" button
    .Zivqke
        color ac-p !important
    
    // "Help other viewers of this page"
    .Mz7Vzb
        color fg-disabled
        
    // Border below reviews
    .jA1nid
        border-color black
    
    /* ============================= */
    /* SECTION: Music Review popover */
    /* ============================= */
    // Background
    .Xz5tfb.aID8W
        scrimmedBg()
    
    // Music review main dialog
    .NJfJb.mr5vfb
        lighting(00)
        elevation(24)
        border none
    
    // "Write a review"
    .foTEEb
        lighting(04)
        color fg-p
        box-shadow none
        border-bottom 1px solid black
    
    // Link to Google Profile
    .Bk8Hxd:link,
    .Bk8Hxd:visited
        color fg-p
    
    .NJfJb.mr5vfb textarea
        elevation(01)
        lighting(01)
        border none
        &::placeholder
            color fg-disabled
    
    // "Do you want to discard your changes?" banner
    .Wmk3Kb
        background ac-p
        color fg-on-p
    
    // Yes/No buttons
    .MycV7b
        color fg-on-p
        &:hover,
        &:active
            text-decoration underline
    
    // Music Review dialog Cancel/Post buttons
    .viyDOb
        color ac-p
    .IkxiNb
        background-color ac-p
        color fg-on-p
    
    /* ====================== */
    /* SECTION: Share popover */
    /* ====================== */

    // Background
    .qW28Ef.aID8W
        scrimmedBg()
        
    // Share main dialog
    .EF2Bkc
        lighting(01)
        color fg-p
    
    // "Share" title
    .muUXmb
        color fg-p
    
    // Share "close" button
    .ULejkd
        color fg-p
        &:focus
            elevation(08)
            lighting(32)
            color fg-emph
            transition none
    
    // Share dialog links
    .DssFqf,
    .UN0Fyc
        color fg-p
    
    // "Click to copy link"
    .jCOogd
        color fg-disabled
    input.NBMVc
        lighting(01)
        elevation(01)
        color fg-p
        border-radius 4px
        &:hover,
        &:active
            lighting(08)
            elevation(08)
    .LXtP0 .ZXb90b
        padding 4px
    /* ========================= */
    /* SECTION: Right-side cards */
    /* ========================= */
    .kno-ecr-pt
        color fg-emph
    
    a.fl:link,
    .fl a,
    .flt,
    a.flt,
    .gl a:link,
    a.mblink,
    .mblink b
        color ac-p
    
    .xXEKkb
        color ac-p !important
    
    .cwUqwd
        color fg-p
    
    .y8Jpof:hover
        background-color focused
    
    .kp-blk .xpdclose .farUxc,
    .kp-blk .xpdopen .mJ2Mod
        border-color black
    

    /* All card titles */
    .JolIg,
    .garHBe
        color fg-emph
    

    /* Link/share icon */
    .rsir2d
        color fg-p
    

    /* "People also search for..." */
    .cbphWd
        border-color black
    
    .vp45yf
        color fg-p
    

    /* Related searches */
    #brs .med
        color fg-p
    
    .oaSpFd
        color fg-p
    

    /* Searches footer */
    #foot #navcnt a
        color ac-p
    
    #foot #navcnt .cur
        color ac-s
    

    /* Videos suggestions */
    .cJzOGc
        color ac-p-alt
    
    .zECGdd
        color fg-disabled
    

    /* Picture suggestions */
    #irl_r_a:hover
        color ac-s
    
    /* ================== */
    /* SECTION: Translate */
    /* ================== */

    // Translation result
    #tw-target
        lighting(01)
    
    // Enter Text field
    .tw-data-placeholder
        color: fg-p
    
    // Internal UI Borders
    .DHcWmd
        background black
    .vCOSGb
        border-color black
    
    // Language suggestions box
    .gt-is
        lighting(01)
    
    // Language suggestion tile
    .gt-is-itm
        lighting(05)
        elevation(04)
    .gt-is-itm-active,
    .gt-is-itm-focused,
    .gt-is-itm:hover,
    .gt-is-itm:active
        lighting(09)
        elevation(08)
    .gt-is-lb,
    .gt-is-cont
        color fg-p
    
    // Phrase suggestions
    .gt-is-sg
        color fg-p
     
    // UI Buttons
    .tw-menu-btn
        color: fg-p
        &:not(.tw-menu-btn-disabled):hover
            color: ac-p
    
    // Language selection dropdown buttons
    .hhB0V
        color: ac-p

     // Language selection view
    .zaokob
        elevation(01)
        lighting(01)
    .language_list_languages.tw-ll-top::after
        background linear-gradient(to bottom, transparent, black)
    
    // Language selection view search
    .tw-lp-search
        color fg-p
        elevation(01)
        lighting(02)
    
    // Language selection view header
    .GL3ftd
        border-color black
    
    // Language list item
    .language_list_item
        color fg-p
    .tw-lliw:hover,
    .tw-lliw:focus
        lighting(04)
        elevation(04)
        border-color transparent
    .tw-lliw.item-selected .language_list_item
        color ac-p

    /* SECTION: Translation Feedback dialog */
    .NJfJb
        elevation(24)
        lighting(24)
    
    // Checked radio button
    .bzPMYzFI66P__blue .bzPMYzFI66P__inner-circle,
    .bzPMYzFI66P__blue .bzPMYzFI66P__checked .bzPMYzFI66P__active-circle,
    .bzPMYzFI66P__blue .bzPMYzFI66P__highlight .bzPMYzFI66P__active-circle
        background ac-p
    .bzPMYzFI66P__blue .bzPMYzFI66P__checked .bzPMYzFI66P__outer-circle
        border-color ac-p
    .bzPMYzFI66P__outer-circle
        border-color fg-disabled
    
    // Comments or suggestions textfield
    .NJfJb textarea
        lighting(24)
    .GItzWb
        background ac-p
    .c0dB4b
        border-color black
    
    // "Send" button
    .U8shWc.Vy8nid:disabled,
    .U8shWc.Vy8nid[disabled]:not([disabled=false])
        color fg-disabled !important
    .U8shWc.Vy8nid
        color ac-p !important
        
    // Dialog footer
    .duf3cw-ctrl
        border-color black
    
    /* =================== */
    /* SECTION: Calculator */
    /* =================== */
    .fB3vD
        color fg-p
    
    .XH1CIc
        color fg-disabled
    
    .TIGsTb
        border-color black
        background bg-01
    
    .lqyc1.d0jRmd,
    .d0jRmd
        border-color ac-p
    
    .wVudU
        background bg-01
    
    .AOvabd,
    .dxp44d
        background bg-12
        border-color transparent
        color fg-p
        box-shadow: 0 0 4px 1px black
    
    .AOvabd:hover,
    .dxp44d:hover
        background focused
    
    .AOvabd:focus:hover,
    .dxp44d:focus:hover
        background focused
        border-color ac-s
    
    .UUhRt
        background ac-p
        color fg-on-p
        border-color transparent
        box-shadow: 0 0 4px 1px black
    
    .UUhRt:hover
        background ac-p-alt
    
    .UUhRt:focus:hover
        background ac-p-alt
        border-color ac-s
    
    .MEdqYd,
    .feqqG
        background bg-16
        border-color transparent
        color fg-p
        box-shadow: 0 0 5px 1px black
    
    .MEdqYd:hover,
    .feqqG:hover
        background focused
    
    .MEdqYd:focus:hover,
    .feqqG:focus:hover
        background focused
        border-color ac-s
    
    .pno7A.hU1rMc .Tqvz7b,
    .pno7A.rfUaPd .SwDSDf
        color ac-p
    
    .pno7A.rfUaPd .Tqvz7b,
    .pno7A.hU1rMc .SwDSDf
        color fg-disabled
    
    .Lm2Tt
        border-color black
    
    .XDTKBd
        color fg-disabled
    
    .ZtnWe
        color ac-p
    

    /* ==================== */
    /* SECTION: Page footer */
    /* ==================== */
    #fbar
        background bg-08
        border-color black
    
    .smiUbb
        color fg-p
    
    #Wprf1b
        color fg-emph
    
    .smiUbb a,
    #swml a
        color fg-disabled
    
    .smiUbb a:hover,
    #swml a:hover
        color fg-emph
    
    .fbar a:hover,
    #fsett a:hover
        color ac-p-hov

